<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Screen Resolution
ResChanged = false
RSelector = instance_create(300,280,oList)
RSelector.val = string(global.WIN_WIDTH) + 'x' + string(global.WIN_HEIGHT)
RSelector.num = -1
if global.config[?'Widescreen']
  {
  ds_map_add(RSelector.arr,0,'1024x576')
  ds_map_add(RSelector.arr,1,'1152x648')
  ds_map_add(RSelector.arr,2,'1280x720') 
  ds_map_add(RSelector.arr,3,'1366x768') 
  ds_map_add(RSelector.arr,4,'1536x864') 
  ds_map_add(RSelector.arr,5,'1600x900') 
  ds_map_add(RSelector.arr,6,'1920x1080') //TODO: check win res to prevent clicking on 1080p
  }                                             //when screen res is obossany 1024x768
else
  {
  ds_map_add(RSelector.arr,0,'800x600') 
  ds_map_add(RSelector.arr,1,'1024x768') 
  ds_map_add(RSelector.arr,2,'1152x864')
  ds_map_add(RSelector.arr,3,'1280x960')
  ds_map_add(RSelector.arr,4,'1400x1050') 
  ds_map_add(RSelector.arr,5,'1440x1080') 
  ds_map_add(RSelector.arr,6,'1600x1200') 
  }

//fullscreen
Full = instance_create(300,440,oCheckBox) 
Full.content = 'Fullscreen'
Full.checked = global.config[?'Fullscreen']

//widescreen
Wide = instance_create(300,600,oCheckBox) 
with (Wide)
  {
  content = 'Widescreen'
  checked = global.config[?'Widescreen']
  event_user(0)
  }

//lang create olist aka locale
PLang = instance_create(900,280,oList)
ds_map_add(PLang.arr,0,'English')
ds_map_add(PLang.arr,1,'Russian')
PLang.num = global.config[?'Localization']
PLang.val = PLang.arr[?global.config[?'Localization']]

//showlogo
ShowLogo = instance_create(300,760,oCheckBox) 
with (ShowLogo) 
  {
  content = 'Show Logo'
  checked = global.config[?'ShowLogo']
  event_user(0)
  }

//reset
Reset = instance_create(300,920,oButton)  
with (Reset)
  {
  content = 'RESTORE DEFAULTS'
  font = fImpact64
  event_user(0)
  }

//Sound &amp; music
Master = instance_create(900,440,oSlider)
Master.content = 'MASTER'
Master.currval = global.config[?'Master']

Sound = instance_create(900,600,oSlider)
Sound.content = 'SOUND'
Sound.currval = global.config[?'Sound']

Music = instance_create(900,760,oSlider)
Music.content = 'MUSIC'
Music.currval = global.config[?'Music']
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>  //rewrite config fields
global.config[?'Fullscreen'] = Full.checked
if global.config[?'Fullscreen']
  {
  global.WIN_WIDTH = display_get_width()
  global.WIN_HEIGHT = display_get_height()
  }
  //RESET WINDOW SETTINGS
if ResChanged
    {
    if global.WIN_HEIGHT / global.WIN_WIDTH &gt;=0.75          //4:3 ratio
      {
      global.DRAW_SCALE = global.WIN_WIDTH / 1600           //black lines on top &amp; bottom
      global.DRAW_VOFF = (global.WIN_HEIGHT - 1200*global.DRAW_SCALE) / 2
      global.DRAW_HOFF = 0
      }
    else 
      {
      global.DRAW_SCALE = global.WIN_HEIGHT / 1200          //black on left &amp; right
      global.DRAW_VOFF = 0
      global.DRAW_HOFF = (global.WIN_WIDTH - 1600*global.DRAW_SCALE) / 2 
      }
    window_set_size(global.WIN_WIDTH,global.WIN_HEIGHT)
    window_set_fullscreen(global.config[?'Fullscreen'])
    window_center()
    display_set_gui_size(1600,1200)
    }
//OTHER FIELDS
global.config[?'ShowLogo'] = ShowLogo.checked
global.config[?'Widescreen'] = Wide.checked
global.config[?'Localization'] = PLang.num
global.config[?'Master'] = Master.currval
global.config[?'Sound'] = Sound.currval
global.config[?'Music'] = Music.currval
  
  //rewrite cfg file and back
  funcCfgWrite()
  
instance_destroy(RSelector,true)
instance_destroy(Full,true)
instance_destroy(Wide,true)
instance_destroy(PLang,true)
instance_destroy(ShowLogo,true)
instance_destroy(Reset,true)
instance_destroy(Master,true)
instance_destroy(Sound,true)
instance_destroy(Music,true)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="56">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if RSelector.clicked
  {
  if RSelector.active
    {
    Full.clickable = false
    Wide.clickable = false
    PLang.clickable = false
    ShowLogo.clickable = false
    Reset.clickable = false
    RSelector.clicked = false
    }
  else
    {
    Full.clickable = true
    Wide.clickable = true
    PLang.clickable = true
    ShowLogo.clickable = true
    Reset.clickable = true
    RSelector.clicked = false
    funcSetWinResFromString(RSelector.val)
    ResChanged = true
    }
  }
else if Full.clicked
  {
  ResChanged = true
  Full.clicked = false
  }
else if Wide.clicked
  {
  Wide.clicked = false
  ds_map_clear(RSelector.arr)
  if Wide.checked
    {
    ds_map_add(RSelector.arr,0,'1024x576')
    ds_map_add(RSelector.arr,1,'1152x648')
    ds_map_add(RSelector.arr,2,'1280x720') 
    ds_map_add(RSelector.arr,3,'1366x768') 
    ds_map_add(RSelector.arr,4,'1536x864') 
    ds_map_add(RSelector.arr,5,'1600x900') 
    ds_map_add(RSelector.arr,6,'1920x1080') //TODO: check win res to prevent clicking on 1080p
    }                                             //when screen res is obossany 1024x768
  else
    {
    ds_map_add(RSelector.arr,0,'800x600') 
    ds_map_add(RSelector.arr,1,'1024x768') 
    ds_map_add(RSelector.arr,2,'1152x864')
    ds_map_add(RSelector.arr,3,'1280x960')
    ds_map_add(RSelector.arr,4,'1400x1050') 
    ds_map_add(RSelector.arr,5,'1440x1080') 
    ds_map_add(RSelector.arr,6,'1600x1200') 
    }
  }
else if Master.clicked
  Master.clicked = false
else if Sound.clicked
  Sound.clicked = false
else if Music.clicked
  Music.clicked = false
else if Reset.clicked
  {
  //Button properties
  Reset.clicked = false
  Reset.clickable = false
  Reset.checked = true
  Reset.content = 'RESTORED'
  //cfg
  global.ShowLogo = true
  global.WIN_WIDTH = display_get_width()
  global.WIN_HEIGHT = display_get_height()
  //TODO: recalculate screen properties
  //TODO: change oList.val
  global.FULL = true
  global.Master = 100
  global.Sound = 100
  global.Music = 100
  ResChanged = true
  }
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
